{"version":3,"sources":["test/app-test.js","test/channel-test.js","test/data/programs-data.js","test/data/schedule-data.js","test/helper.js","test/nav-test.js","test/player-test.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApFA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5GA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AAHA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AAHA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvBA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7EA;AAAA;ACAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArFA;AAAA","file":"public/test.js","sourcesContent":["'use strict';\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactAddonsTestUtils = require('react-addons-test-utils');\n\nvar _reactAddonsTestUtils2 = _interopRequireDefault(_reactAddonsTestUtils);\n\nvar _App = require('../app/components/App');\n\nvar _App2 = _interopRequireDefault(_App);\n\nvar _sinon = require('sinon');\n\nvar _sinon2 = _interopRequireDefault(_sinon);\n\nvar _chai = require('chai');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\ndescribe('<App />', function () {\n  var component,\n      trackerfunc,\n      trackercalled,\n      fetchfunc,\n      fetchcalled = undefined;\n  beforeEach(function () {\n    component = _reactAddonsTestUtils2['default'].renderIntoDocument(_react2['default'].createElement(_App2['default'], null));\n  });\n  it('should not have a default selected channel', function () {\n    (0, _chai.expect)(component.state.ui.selectedchannelid).to.equal(null);\n  });\n  describe('<Fetch />', function () {\n    it('should get channels from SR-API through on componentWillMount', function () {\n      var getChannelsCalled = \"notCorrectUrl\";\n      component.get = function (url, prop) {\n        return new Promise(function (resolve, reject) {\n          getChannelsCalled = url;\n          resolve([]);\n        });\n      };\n      component.componentWillMount(); // i do trust reacts lifecycle\n      (0, _chai.expect)(getChannelsCalled).not.to.equal(\"notCorrectUrl\");\n      (0, _chai.expect)(getChannelsCalled).to.contain(\"channels\");\n    });\n    it('should update schedule and programs if channel has changed', function () {\n      var counter = 0;\n      component.get = function (url, prop) {\n        return new Promise(function (resolve, reject) {\n          counter++;\n          resolve([]);\n        });\n      };\n      component._cache.ui.selectedchannelid = 163;\n      component.getProgramsForChannel({ id: -1 });\n      (0, _chai.expect)(counter).to.equal(2);\n    });\n\n    it('should not update schedule and programs if channel has not changed', function () {\n      var counter = 0;\n      component.get = function (url, prop) {\n        return new Promise(function (resolve, reject) {\n          counter++;\n          resolve([]);\n        });\n      };\n      component._cache.ui.selectedchannelid = 163;\n      component.getProgramsForChannel({ id: 163 });\n      (0, _chai.expect)(counter).to.equal(0);\n    });\n  });\n  describe('<Tracker />', function () {\n    it('should be called when updatePlayer in <App /> is invoked', function () {\n      var trackercalled = false;\n      component.postTrackToApi = function (channelId, channelImage, callback) {\n        trackercalled = true;\n      };\n      component.tracker();\n      (0, _chai.expect)(trackercalled).to.equal(true);\n    });\n  });\n});\n","'use strict';\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactAddonsTestUtils = require('react-addons-test-utils');\n\nvar _reactAddonsTestUtils2 = _interopRequireDefault(_reactAddonsTestUtils);\n\nvar _Channel = require('../app/components/Channel');\n\nvar _Channel2 = _interopRequireDefault(_Channel);\n\nvar _Guide = require('../app/components/Guide');\n\nvar _Guide2 = _interopRequireDefault(_Guide);\n\nvar _programsData = require('./data/programs-data');\n\nvar _programsData2 = _interopRequireDefault(_programsData);\n\nvar _scheduleData = require('./data/schedule-data');\n\nvar _scheduleData2 = _interopRequireDefault(_scheduleData);\n\nvar _sinon = require('sinon');\n\nvar _sinon2 = _interopRequireDefault(_sinon);\n\nvar _chai = require('chai');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\ndescribe('<Channel />', function () {\n\n  var testnow,\n      s,\n      updatestatefunc,\n      updatestatecalled,\n      updateplayerfunc,\n      updateplayercalled,\n      component = undefined;\n\n  beforeEach(function () {\n    testnow = new Date(1485731000000);\n    s = { programs: _programsData2['default'], schedule: _scheduleData2['default'], ui: {\n        selectedchannelid: 163,\n        selectedchannelimage: \"image-163\",\n        display: \"guide\"\n      } };\n    updatestatecalled = false;\n    updatestatefunc = function () {\n      function updatestatefunc(obj) {\n        updatestatecalled = obj;\n      }\n\n      return updatestatefunc;\n    }();\n    updateplayerfunc = function () {\n      function updateplayerfunc(obj) {\n        updateplayercalled = obj;\n      }\n\n      return updateplayerfunc;\n    }();\n    component = _reactAddonsTestUtils2['default'].renderIntoDocument(_react2['default'].createElement(_Channel2['default'], { programs: s.programs, schedule: s.schedule, ui: s.ui, update: updatestatefunc, updateplayer: updateplayerfunc }));\n  });\n\n  it('should toggle between <Program /> and <Guide /> and update state', function () {\n    var links = _reactAddonsTestUtils2['default'].scryRenderedDOMComponentsWithTag(component, 'a');\n    (0, _chai.expect)(links.length).to.equal(2);\n    var guidelink = links[0];\n    var programlink = links[1];\n    _reactAddonsTestUtils2['default'].Simulate.click(programlink);\n    (0, _chai.expect)(updatestatecalled.ui.display).to.equal('program');\n    _reactAddonsTestUtils2['default'].Simulate.click(guidelink);\n    (0, _chai.expect)(updatestatecalled.ui.display).to.equal('guide');\n  });\n  it('should by default render <Guide />', function () {\n    var guide = _reactAddonsTestUtils2['default'].findRenderedDOMComponentWithTag(component, 'ul').className;\n    (0, _chai.expect)(guide).to.equal('guide');\n  });\n\n  describe('<Guide />', function () {\n    it('shoule update player state when play btn pressed', function () {\n      var guidecomponent = _reactAddonsTestUtils2['default'].renderIntoDocument(_react2['default'].createElement(_Guide2['default'], { schedule: s.schedule, updateplayer: updateplayerfunc, now: testnow }));\n      var links = _reactAddonsTestUtils2['default'].scryRenderedDOMComponentsWithTag(guidecomponent, 'a');\n      var playbtn = links[0];\n      (0, _chai.expect)(playbtn.className).to.contain('btn');\n      _reactAddonsTestUtils2['default'].Simulate.click(playbtn);\n      (0, _chai.expect)(updateplayercalled.cmd).to.equal('play');\n      (0, _chai.expect)(updateplayercalled.player.channel).to.be.ok;\n      (0, _chai.expect)(updateplayercalled.player.title).to.be.ok;\n    });\n  });\n  describe('<Program />', function () {\n    it('should render <Program /> on program link click', function () {\n      // Change component props before calling component like setState func\n      var ui = s.ui;\n      // set program as selected views\n      ui.display = \"program\";\n      var programcomponent = _reactAddonsTestUtils2['default'].renderIntoDocument(_react2['default'].createElement(_Channel2['default'], { programs: s.programs, schedule: s.schedule, ui: ui, update: updatestatefunc, updateplayer: updateplayerfunc }));\n      var program = _reactAddonsTestUtils2['default'].findRenderedDOMComponentWithClass(programcomponent, 'program-list');\n      (0, _chai.expect)(program).to.be.ok;\n    });\n  });\n});\n","\"use strict\";\n\nmodule.exports = [{ \"description\": \"En lokal radiokanal som lyfter Stockholm i världen och världen i Stockholm. Alltid tillsammans med dig!\", \"programcategory\": { \"id\": 3, \"name\": \"Kultur/Nöje\" }, \"email\": \"p5sthlm@sverigesradio.se\", \"phone\": \"\", \"programurl\": \"http://sverigesradio.se/sida/default.aspx?programid=2842\", \"programimage\": \"http://static-cdn.sr.se/sida/images/2842/3622735_1400_1400.jpg?preset=api-default-square\", \"programimagetemplate\": \"http://static-cdn.sr.se/sida/images/2842/3622735_1400_1400.jpg\", \"programimagewide\": \"http://static-cdn.sr.se/sida/images/2842/3633868_2048_1152.jpg?preset=api-default-rectangle\", \"programimagetemplatewide\": \"http://static-cdn.sr.se/sida/images/2842/3633868_2048_1152.jpg\", \"socialimage\": \"http://static-cdn.sr.se/sida/images/2842/3622735_1400_1400.jpg?preset=api-default-square\", \"socialimagetemplate\": \"http://static-cdn.sr.se/sida/images/2842/3622735_1400_1400.jpg\", \"socialmediaplatforms\": [{ \"platform\": \"Facebook\", \"platformurl\": \"https://www.facebook.com/pages/P5-STHLM/692062967588571?\" }, { \"platform\": \"Twitter\", \"platformurl\": \"https://twitter.com/p5sthlm/\" }, { \"platform\": \"Instagram\", \"platformurl\": \"https://instagram.com/p5sthlm/\" }], \"channel\": { \"id\": 2842, \"name\": \"P5 STHLM\" }, \"archived\": false, \"hasondemand\": true, \"haspod\": true, \"responsibleeditor\": \"Andreas Miller\", \"id\": 2842, \"name\": \"P5 STHLM\" }];\n","\"use strict\";\n\nmodule.exports = [{ \"episodeid\": 841807, \"title\": \"Ekonyheter\", \"description\": \"Här hör du Ekots nyhetssändningar. Senaste nytt - dygnet runt, året om.\", \"starttimeutc\": \"/Date(1485730800000)/\", \"endtimeutc\": \"/Date(1485730920000)/\", \"program\": { \"id\": 4540, \"name\": \"Ekot\" }, \"channel\": { \"id\": 2842, \"name\": \"P5 STHLM\" }, \"imageurl\": \"http://static-cdn.sr.se/sida/images/4540/3634468_2048_1152.jpg?preset=api-default-square\", \"imageurltemplate\": \"http://static-cdn.sr.se/sida/images/4540/3634468_2048_1152.jpg\" }, { \"episodeid\": 841808, \"title\": \"Vaken\", \"subtitle\": \"med Pamela Taivassalo och Peter Sundberg\", \"description\": \"Musik, tävlingar och samtal. Ett program för dig som är vaken, helt enkelt.\", \"starttimeutc\": \"/Date(1485730920000)/\", \"endtimeutc\": \"/Date(1485734400000)/\", \"program\": { \"id\": 2689, \"name\": \"Vaken med P3 & P4\" }, \"channel\": { \"id\": 2842, \"name\": \"P5 STHLM\" }, \"imageurl\": \"http://static-cdn.sr.se/sida/images/2689/38847a6d-d217-4b69-88d5-875094609a4b.jpg?preset=api-default-square\", \"imageurltemplate\": \"http://static-cdn.sr.se/sida/images/2689/38847a6d-d217-4b69-88d5-875094609a4b.jpg\" }, { \"episodeid\": 841808, \"title\": \"Ekonyheter\", \"description\": \"Här hör du Ekots nyhetssändningar. Senaste nytt - dygnet runt, året om.\", \"starttimeutc\": \"/Date(1485734400000)/\", \"endtimeutc\": \"/Date(1485734520000)/\", \"program\": { \"id\": 4540, \"name\": \"Ekot\" }, \"channel\": { \"id\": 2842, \"name\": \"P5 STHLM\" } }, { \"episodeid\": 841808, \"title\": \"Vaken\", \"subtitle\": \"med Pamela Taivassalo och Peter Sundberg\", \"description\": \"Musik, tävlingar och samtal. Ett program för dig som är vaken, helt enkelt.\", \"starttimeutc\": \"/Date(1485734520000)/\", \"endtimeutc\": \"/Date(1485738000000)/\", \"program\": { \"id\": 2689, \"name\": \"Vaken med P3 & P4\" }, \"channel\": { \"id\": 2842, \"name\": \"P5 STHLM\" }, \"imageurl\": \"http://static-cdn.sr.se/sida/images/2689/38847a6d-d217-4b69-88d5-875094609a4b.jpg?preset=api-default-square\", \"imageurltemplate\": \"http://static-cdn.sr.se/sida/images/2689/38847a6d-d217-4b69-88d5-875094609a4b.jpg\" }];\n","'use strict';\n\nvar _jsdom = require('jsdom');\n\nvar _jsdom2 = _interopRequireDefault(_jsdom);\n\nvar _chai = require('chai');\n\nvar _chai2 = _interopRequireDefault(_chai);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar doc = _jsdom2['default'].jsdom('<!DOCTYPE html><html><body></body></html>');\nvar win = doc.defaultView;\n\nglobal.document = doc;\nglobal.window = win;\n\nObject.keys(window).forEach(function (key) {\n\tif (!(key in global)) {\n\t\tglobal[key] = window[key];\n\t}\n});\n","'use strict';\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactAddonsTestUtils = require('react-addons-test-utils');\n\nvar _reactAddonsTestUtils2 = _interopRequireDefault(_reactAddonsTestUtils);\n\nvar _Nav = require('../app/components/Nav');\n\nvar _Nav2 = _interopRequireDefault(_Nav);\n\nvar _NavItem = require('../app/components/NavItem');\n\nvar _NavItem2 = _interopRequireDefault(_NavItem);\n\nvar _sinon = require('sinon');\n\nvar _sinon2 = _interopRequireDefault(_sinon);\n\nvar _chai = require('chai');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\ndescribe('<Nav />', function () {\n  var channel,\n      navitemfunccalled,\n      navitemfunc,\n      navfunc,\n      navfunccalled,\n      component = undefined;\n  beforeEach(function () {\n    channel = { id: '132', name: 'P1', image: 'image-132' };\n    navitemfunc = function () {\n      function navitemfunc(obj) {\n        navitemfunccalled = obj;\n      }\n\n      return navitemfunc;\n    }();\n    navfunc = function () {\n      function navfunc(obj) {\n        navfunccalled = obj;\n      }\n\n      return navfunc;\n    }();\n  });\n\n  it('should render list of clickable channel images', function () {\n    var channels = [];\n    channels.push(channel);\n    component = _reactAddonsTestUtils2['default'].renderIntoDocument(_react2['default'].createElement(_Nav2['default'], { channels: channels, updateState: navfunc }));\n    var navitemImage = _reactAddonsTestUtils2['default'].findRenderedDOMComponentWithTag(component, 'img').src;\n    (0, _chai.expect)(navitemImage).to.equal('image-132');\n\n    var navitemLink = _reactAddonsTestUtils2['default'].findRenderedDOMComponentWithTag(component, 'a');\n    _reactAddonsTestUtils2['default'].Simulate.click(navitemLink);\n    (0, _chai.expect)(navfunccalled).to.equal(channels[0]);\n  });\n\n  describe('<Navitem />', function () {\n    it('should render a dom element with className navitem', function () {\n      component = _reactAddonsTestUtils2['default'].renderIntoDocument(_react2['default'].createElement(_NavItem2['default'], { channel: channel, updateState: navitemfunc }));\n      var navitem = _reactAddonsTestUtils2['default'].findRenderedDOMComponentWithClass(component, 'navitem');\n      (0, _chai.expect)(navitem).to.be.ok;\n    });\n    it('should call updateState with the channel properties set on component', function () {\n      component = _reactAddonsTestUtils2['default'].renderIntoDocument(_react2['default'].createElement(_NavItem2['default'], { channel: channel, updateState: navitemfunc }));\n      var link = _reactAddonsTestUtils2['default'].findRenderedDOMComponentWithTag(component, 'a');\n      _reactAddonsTestUtils2['default'].Simulate.click(link);\n      (0, _chai.expect)(navitemfunccalled).to.equal(channel);\n    });\n  });\n});\n","'use strict';\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactAddonsTestUtils = require('react-addons-test-utils');\n\nvar _reactAddonsTestUtils2 = _interopRequireDefault(_reactAddonsTestUtils);\n\nvar _Player = require('../app/components/Player');\n\nvar _Player2 = _interopRequireDefault(_Player);\n\nvar _sinon = require('sinon');\n\nvar _sinon2 = _interopRequireDefault(_sinon);\n\nvar _chai = require('chai');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\ndescribe('<Player />', function () {\n  var component,\n      s,\n      updateplayerfunc,\n      updateplayercalled,\n      trackerfunc = undefined;\n  beforeEach(function () {\n    s = {};\n    s.player = {\n      cmd: \"pause\", // \"play\", \"pause\"\n      program: { title: \"title\", subtitle: \"subtitle\" },\n      src: \"http://sverigesradio.se/topsy/direkt/132.mp3\"\n    };\n    s.ui = {\n      selectedchannelid: 132,\n      selectedchannelimage: '132-image',\n      display: \"guide\"\n    };\n    trackerfunc = function () {\n      function trackerfunc() {}\n\n      return trackerfunc;\n    }();\n    updateplayerfunc = function () {\n      function updateplayerfunc(obj) {\n        updateplayercalled = obj;\n      }\n\n      return updateplayerfunc;\n    }();\n  });\n  it('shold be paused by default', function () {\n    component = _reactAddonsTestUtils2['default'].renderIntoDocument(_react2['default'].createElement(_Player2['default'], { player: s.player, ui: s.ui, updateplayer: updateplayerfunc, tracker: trackerfunc }));\n    var audio = _reactAddonsTestUtils2['default'].findRenderedDOMComponentWithTag(component, 'audio');\n    (0, _chai.expect)(audio).to.be.ok;\n    (0, _chai.expect)(audio.paused).to.equal(true);\n  });\n  it('should play audio if given play command', function () {\n    var playercomponent = _reactAddonsTestUtils2['default'].renderIntoDocument(_react2['default'].createElement(_Player2['default'], { player: s.player, ui: s.ui, updateplayer: updateplayerfunc, tracker: trackerfunc }));\n    (0, _chai.expect)(playercomponent.props.player.cmd).to.equal('pause');\n    s.player.cmd = 'play';\n    playercomponent.setState(s);\n    (0, _chai.expect)(playercomponent.props.player.cmd).to.equal('play');\n  });\n  it('should fire tracker call if component did mount with play', function () {\n    var playercomponent = _reactAddonsTestUtils2['default'].renderIntoDocument(_react2['default'].createElement(_Player2['default'], { player: s.player, ui: s.ui, updateplayer: updateplayerfunc, tracker: trackerfunc }));\n    var trackercalled = false;\n    s.player.cmd = 'play';\n    playercomponent.componentDidUpdate = function (prevProps, prevState) {\n      trackercalled = true;\n    };\n    playercomponent.setState(s);\n    (0, _chai.expect)(trackercalled).to.equal(true);\n  });\n  it('should pause audio if pause links are pressed', function () {\n    s.player.cmd = 'play';\n    var playercomponent = _reactAddonsTestUtils2['default'].renderIntoDocument(_react2['default'].createElement(_Player2['default'], { player: s.player, ui: s.ui, updateplayer: updateplayerfunc, tracker: trackerfunc }));\n    var pauselinks = _reactAddonsTestUtils2['default'].scryRenderedDOMComponentsWithTag(component, 'a');\n    (0, _chai.expect)(pauselinks.length).to.equal(2);\n    _reactAddonsTestUtils2['default'].Simulate.click(pauselinks[0]);\n    (0, _chai.expect)(updateplayercalled).to.deep.equal({ cmd: \"pause\" });\n  });\n});\n"]}